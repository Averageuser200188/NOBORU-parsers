HentaiCafe=Parser:new("HentaiCafe","https://hentai.cafe","ENG","HENCAFENG",1)HentaiCafe.NSFW=true;local function a(b)if u8c then return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&([^;]-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)else return b end end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="string"})while Threads.check(g)do coroutine.yield(false)end;return g.string or""end;function HentaiCafe:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l in i:gmatch('article.-href=".-/(%d-)".-src="(%S-)".-entry%-title">.-<a href.->(.-)</a>')do h[#h+1]=CreateManga(a(l:gsub("<[^>]->","")),j,k:gsub("%%","%%%%"),self.ID,self.Link.."/hc.fyi/"..j)h.NoPages=false;coroutine.yield(false)end end;function HentaiCafe:getPopularManga(m,h)self:getManga(self.Link.."/page/"..m,h)end;function HentaiCafe:searchManga(n,m,h)self:getManga(self.Link.."/page/"..m.."?s="..n,h)end;function HentaiCafe:getChapters(o,h)local i=e(self.Link.."/hc.fyi/"..o.Link)o.Name=a(i:match('<h1 class="entry-title">(.-)</h1>')or o.Name)local f,p=i:match('/manga/read/(.-)"'),"Read chapter"if f then h[#h+1]={Name=p,Link=f,Pages={},Manga=o}end end;function HentaiCafe:prepareChapter(q,h)local i=e(self.Link.."/manga/read/"..q.Link)for f in i:gmatch('"url"%s?:%s?"(%S-)"')do h[#h+1]=f:gsub("\\/","/"):gsub("%%","%%%%")end end;function HentaiCafe:loadChapterPage(f,h)h.Link=f end