MangaReader=Parser:new("MangaReader","https://www.mangareader.net","ENG","MANGAREADEREN",4)MangaReader.Disabled=true;MangaReader.Tags={"Action","Adventure","Comedy","Demons","Drama","Ecchi","Fantasy","Gender Bender","Harem","Historical","Horror","Josei","Magic","Martial Arts","Mature","Mecha","Military","Mystery","One Shot","Psychological","Romance","School Life","Sci-Fi","Seinen","Shoujo","Shoujoai","Shounen","Shounenai","Slice of Life","Smut","Sports","Super Power","Supernatural","Tragedy","Vampire","Yaoi","Yuri"}MangaReader.TagValues={["Action"]="action",["Adventure"]="adventure",["Comedy"]="comedy",["Demons"]="demons",["Drama"]="drama",["Ecchi"]="ecchi",["Fantasy"]="fantasy",["Gender Bender"]="gender-bender",["Harem"]="harem",["Historical"]="historical",["Horror"]="horror",["Josei"]="josei",["Magic"]="magic",["Martial Arts"]="martial-arts",["Mature"]="mature",["Mecha"]="mecha",["Military"]="military",["Mystery"]="mystery",["One Shot"]="one-shot",["Psychological"]="psychological",["Romance"]="romance",["School Life"]="school-life",["Sci-Fi"]="sci-fi",["Seinen"]="seinen",["Shoujo"]="shoujo",["Shoujoai"]="shoujoai",["Shounen"]="shounen",["Shounenai"]="shounenai",["Slice of Life"]="slice-of-life",["Smut"]="smut",["Sports"]="sports",["Super Power"]="super-power",["Supernatural"]="supernatural",["Tragedy"]="tragedy",["Vampire"]="vampire",["Yaoi"]="yaoi",["Yuri"]="yuri"}MangaReader.Filters={{Name="Genre",Type="checkcross",Tags={"Action","Adventure","Comedy","Demons","Drama","Ecchi","Fantasy","Gender Bender","Harem","Historical","Horror","Josei","Magic","Martial Arts","Mature","Mecha","Military","Mystery","One Shot","Psychological","Romance","School Life","Sci-Fi","Seinen","Shoujo","Shoujoai","Shounen","Shounenai","Slice of Life","Smut","Sports","Super Power","Supernatural","Tragedy","Vampire","Yaoi","Yuri"}}}MangaReader.GenreKeys={["Action"]=1,["Adventure"]=2,["Comedy"]=3,["Demons"]=4,["Drama"]=5,["Ecchi"]=6,["Fantasy"]=7,["Gender Bender"]=8,["Harem"]=9,["Historical"]=10,["Horror"]=11,["Josei"]=12,["Magic"]=13,["Martial Arts"]=14,["Mature"]=15,["Mecha"]=16,["Military"]=17,["Mystery"]=18,["One Shot"]=19,["Psychological"]=20,["Romance"]=21,["School Life"]=22,["Sci-Fi"]=23,["Seinen"]=24,["Shoujo"]=25,["Shoujoai"]=26,["Shounen"]=27,["Shounenai"]=28,["Slice of Life"]=29,["Smut"]=30,["Sports"]=31,["Super Power"]=32,["Supernatural"]=33,["Tragedy"]=34,["Vampire"]=35,["Yaoi"]=36,["Yuri"]=37}local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="text"})while Threads.check(g)do coroutine.yield(false)end;return g.text or""end;function MangaReader:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l in i:gmatch('<div data%-src="//([^"]-)" class=".-href="([^"]-)">(.-)</a>')do h[#h+1]=CreateManga(a(l),k,"https://"..j,self.ID,self.Link..k)h.NoPages=false;coroutine.yield(false)end end;function MangaReader:getPopularManga(m,h)self:getManga(self.Link.."/popular/"..(m-1)*30,h)end;function MangaReader:getTagManga(m,h,n)self:getManga(self.Link.."/popular/"..(self.TagValues[n]or"").."/"..(m-1)*30,h)end;function MangaReader:searchManga(o,m,h,p)local q=self.Link.."/search/?w="..o.."&rd=0&status=0&order=0&p="..(m-1)*30;if p then q=q.."&genre="Tags={}for r=1,#self.Filters[1].Tags do Tags[r]=0 end;Genres=p["Genre"]if Genres then for s,t in ipairs(Genres.include)do Tags[self.GenreKeys[t]or-1]=1 end;for s,t in ipairs(Genres.exclude)do Tags[self.GenreKeys[t]or-1]=2 end end;q=q..table.concat(Tags)end;local i=e(q):match("^(.-)Author/Artist Results")or""h.NoPages=true;for j,k,l in i:gmatch('<div data%-src="//([^"]-)" class=".-href="([^"]-)">(.-)</a>')do h[#h+1]=CreateManga(a(l),k,"https://"..j,self.ID,self.Link..k)h.NoPages=false;coroutine.yield(false)end end;function MangaReader:getChapters(u,h)local i=e(self.Link..u.Link)local v=i:match("<td>Date Added</td>(.+)$")or""local w=i:match('<p>([^<]-)</p>')or""u.NewImageLink=i:match('src="//([^"]-)" alt')h.Description=a(w)Console.error(u.NewImageLink)for k,l,x in v:gmatch('<i class.-<a href%="/.-(/%S-)">(.-)</a>(.-)</td>')do h[#h+1]={Name=a(l..x),Link=k,Pages={},Manga=u}end end;function MangaReader:prepareChapter(y,h)local i=e(self.Link..y.Manga.Link..y.Link)for k in i:gmatch('"u" ?: ?"([^"]-)"')do h[#h+1]="https:"..k:gsub("\\/","/")end end;function MangaReader:loadChapterPage(f,z)z.Link=f end;MangaPanda=MangaReader:new("MangaPanda","https://www.mangapanda.com","ENG","MANGAPANDAEN",1)MangaPanda.Disabled=true;MangaPanda.Filters=nil;function MangaPanda:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l in i:gmatch('image:url%(\'(%S-)\'.-<div class="manga_name">.-<a href="(%S-)">(.-)</a>')do h[#h+1]=CreateManga(a(l),k,j,self.ID,self.Link..k)h.NoPages=false;coroutine.yield(false)end end;function MangaPanda:searchManga(o,m,h)self:getManga(self.Link.."/search/?w="..o.."&rd=&status=&order=&genre=&p="..(m-1)*30,h)end;function MangaPanda:getChapters(u,h)local i=e(self.Link..u.Link):match('id="chapterlist"(.+)$')or""for k,l,x in i:gmatch('chico_manga.-<a href%="/.-(/%S-)">(.-)</a>(.-)</td>')do h[#h+1]={Name=a(l..x),Link=k,Pages={},Manga=u}end end;function MangaPanda:prepareChapter(y,h)local A=e(self.Link..y.Manga.Link..y.Link.."#"):match("</select> of (.-)<")or 0;for r=1,A do h[r]=self.Link..y.Manga.Link..y.Link.."/"..r end end;function MangaPanda:loadChapterPage(f,z)z.Link=e(f):match('id="img".-src="(.-)"')end