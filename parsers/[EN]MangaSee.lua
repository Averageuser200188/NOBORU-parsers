MangaSee=Parser:new("MangaSee","https://mangaseeonline.us","ENG","MANGASEE",2)MangaSee.Disabled=true;MangaSee.Filters={{Name="Sort By",Type="radio",Tags={"Alphabetical A-Z","Alphabetical Z-A","Newest","Oldest","Most Popular","Least Popular"}},{Name="Type",Type="radio",Tags={"Any","Doujinshi","Manga","Manhua","Manhwa","OEL","One-shot"}},{Name="Genre",Type="checkcross",Tags={"Action","Adult","Adventure","Comedy","Doujinshi","Drama","Ecchi","Fantasy","Gender Bender","Harem","Hentai","Historical","Horror","Isekai","Josei","Lolicon","Martial Arts","Mature","Mecha","Mystery","Psychological","Romance","School Life","Sci-fi","Seinen","Shotacon","Shoujo","Shoujo Ai","Shounen","Shounen Ai","Slice of Life","Smut","Sports","Supernatural","Tragedy","Yaoi","Yuri"}},{Name="Publish Status",Type="radio",Tags={"Any","Cancelled","Complete","Discontinued","Hiatus","Ongoing"}}}MangaSee.SortKeys={["Alphabetical A-Z"]="",["Alphabetical Z-A"]="&sortOrder=descending",["Newest"]="&sortBy=dateUpdated&sortOrder=descending",["Oldest"]="&sortBy=dateUpdated",["Most Popular"]="&sortBy=popularity&sortOrder=descending",["Least Popular"]="&sortBy=popularity"}local a="https://mangaseeonline.us/search/request.php"local b="page=%s&keyword=%s&year=&author=&sortBy=%s&sortOrder=descending&status=&pstatus=&type=%s&genre=%s&genreNo=%s"local function c(d)return d:gsub("&#([^;]-);",function(e)local f=tonumber("0"..e)or tonumber(e)return f and u8c(f)or"&#"..e..";"end):gsub("&(.-);",function(e)return HTML_entities and HTML_entities[e]and u8c(HTML_entities[e])or"&"..e..";"end)end;local function g(h)local i={}Threads.insertTask(i,{Type="StringRequest",Link=h,Table=i,Index="string"})while Threads.check(i)do coroutine.yield(false)end;return i.string or""end;function MangaSee:getManga(j,k)local l=g({Link=a,HttpMethod=POST_METHOD,PostData=j,ContentType=XWWW})k.NoPages=true;for m,n,o in l:gmatch('class="requested">.-src="([^"]-)".-href="([^"]-)">([^<]-)</a>')do local p=CreateManga(c(o),n,m,self.ID,self.Link..n)k[#k+1]=p;k.NoPages=false;coroutine.yield(false)end end;function MangaSee:getLatestManga(q,k)self:getManga(b:format(q,"","dateUpdated","","",""),k)end;function MangaSee:getPopularManga(q,k)self:getManga(b:format(q,"","popularity","","",""),k)end;function MangaSee:searchManga(r,q,k,s)local t="page=%s&keyword=%s&year=&author=%s&status=&pstatus=%s&type=%s&genre=%s&genreNo=%s"local u=""local v=""local w="&sortBy=popularity&sortOrder=descending"local x=""local y=""if s then local z=s["Genre"]if z then u=table.concat(z.include or{},","):gsub(" ","%%20")v=table.concat(z.exclude or{},","):gsub(" ","%%20")end;x=s["Type"]=="Any"and""or s["Type"]or""y=s["Publish Status"]=="Any"and""or s["Publish Status"]or""local A=s["Sort By"]if A and self.SortKeys[A]then w=self.SortKeys[A]end end;self:getManga(t:format(q,r,w,y,x,u,v),k)end;function MangaSee:getChapters(p,k)local l=g(self.Link..p.Link)local B={}for n,o in l:gmatch('class="list%-group%-item".-href="(.-)".-chapterLabel">(.-)</span>')do B[#B+1]={Name=c(o),Link=n,Pages={},Manga=p}end;for C=#B,1,-1 do k[#k+1]=B[C]end end;function MangaSee:prepareChapter(D,k)local l=g(self.Link..D.Link)for n in l:gmatch('"%d-":"([^"]-)"')do k[#k+1]=n:gsub("\\/","/")end end;function MangaSee:loadChapterPage(h,k)k.Link=h end