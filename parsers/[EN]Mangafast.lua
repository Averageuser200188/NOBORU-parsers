Mangafast=Parser:new("Mangafast","https://mangafast.net","ENG","MANGAFAST",1)local a='https://search.mangafast.net/comics/ms'Mangafast.Tags={"Manga","Manhua","Manhwa"}Mangafast.TagValues={["Manga"]="list-manga",["Manhua"]="list-manhua",["Manhwa"]="list-manhwa"}local function b(string)if u8c then return string:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&([^;]-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)else return string end end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="string"})while Threads.check(g)do coroutine.yield(false)end;return g.string or""end;function Mangafast:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l in i:gmatch('class=\'ls4v\'>.-<a href=[\'"]/read/(%S-)[\'"][^>]-title="([^"]-)".-src=\'([^\']-)\'')do h[#h+1]=CreateManga(b(k),j,l:gsub("%%","%%%%"),self.ID,self.Link.."/read/"..j)h.NoPages=false;coroutine.yield(false)end end;function Mangafast:getTagManga(m,h,n)self:getManga(self.Link.."/"..self.TagValues[n]..(m==1 and""or"/"..m),h)end;function Mangafast:getLatestManga(o,h)self:getManga(self.Link,h)h.NoPages=true end;function Mangafast:searchManga(p,o,h)local i=e({Link=a,HttpMethod=POST_METHOD,PostData='{"q":"'..p..'","limit":6}',ContentType=JSON,Header1='mangafast:mangafast'})for k,j,l in i:gmatch('"title":"([^"]-)","slug":"([^"]-)"[^}]-"thumbnail":"([^"]-)"')do h[#h+1]=CreateManga(b(k):gsub("^%l",string.upper),j,l:gsub("%%","%%%%"),self.ID,self.Link.."/read/"..j)coroutine.yield(false)end;h.NoPages=true end;function Mangafast:getChapters(q,h)local i=e(self.Link.."/read/"..q.Link)local r={}h.Description=b(i:match("class=\"desc\">%s*(.-)%s*</p>"):gsub("<br>","\n"):gsub("<[^>]->","")):gsub("^%l",string.upper):gsub("%.%s*%l",string.upper)for j,k in i:gmatch('chapter%-link".-href="/([^"]-)".-left">%s*(.-)%s*</span>')do r[#r+1]={Name=b(k),Link=j,Pages={},Manga=q}end;for s=#r,1,-1 do h[#h+1]=r[s]end end;function Mangafast:prepareChapter(t,h)local i=e(self.Link.."/"..t.Link)for f in i:gmatch('img loading="lazy" [^>]-Page %d*" src="(%S+)"')do h[#h+1]={Link=f:gsub("\\/","/"):gsub("%%","%%%%"),Header1="Referer:"..self.Link.."/"}end end;function Mangafast:loadChapterPage(f,h)h.Link=f end