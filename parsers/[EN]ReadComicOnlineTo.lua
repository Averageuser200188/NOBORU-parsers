RComicOnlineTo=Parser:new("ReadComicOnline.to","https://readcomiconline.to","ENG","RCOMICONLINETOENG",1)local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="text"})while Threads.check(g)do coroutine.yield(false)end;return g.text or""end;function RComicOnlineTo:getManga(f,h)local i=e(f)for j,k,l in i:gmatch('td title=\'[^<]-<img[^>]-src="([^"]-)".-href="([^"]-)">(.-)</a>')do if not j:find("^http")then j=self.Link..j end;h[#h+1]=CreateManga(a(l),k,j,self.ID,self.Link..k)h.NoPages=false;coroutine.yield(false)end end;function RComicOnlineTo:getLatestManga(m,h)self:getManga(self.Link.."/ComicList/Newest?page="..m,h)end;function RComicOnlineTo:getPopularManga(m,h)self:getManga(self.Link.."/ComicList/MostPopular?page="..m,h)end;function RComicOnlineTo:searchManga(n,o,h)self:getManga({Link=self.Link.."/Search/Comic",PostData="keyword="..n,HttpMethod=POST_METHOD},h)h.NoPages=true end;function RComicOnlineTo:getChapters(p,h)local i=e(self.Link..p.Link)local q={}for k,l in i:gmatch('<td>[^<]-<a[^>]-href="/Comic/[^/]-(/[^"]-)"[^>]->[ \n\r]+(.-)</a>')do q[#q+1]={Name=a(l),Link=k,Pages={},Manga=p}end;for r=#q,1,-1 do h[#h+1]=q[r]end end;function RComicOnlineTo:prepareChapter(s,h)local i=e(self.Link..s.Manga.Link..s.Link)for k in i:gmatch('lstImages%.push%("(.-)"%)')do h[#h+1]=k:gsub("\\/","/")end end;function RComicOnlineTo:loadChapterPage(f,h)h.Link=f end