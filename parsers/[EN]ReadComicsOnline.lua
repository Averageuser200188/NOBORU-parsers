ReadComicsOnline=Parser:new("ReadComicsOnline","https://readcomicsonline.ru","ENG","READCONLINEENG",1)local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="text"})while Threads.check(g)do coroutine.yield(false)end;return g.text or""end;function ReadComicsOnline:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l in i:gmatch('<a href="([^"]-)">[^>]-src=\'//([^\']-)\' alt=\'([^\']-)\'>[^<]-</a>')do h[#h+1]=CreateManga(a(l),j,k,self.ID,j)h.NoPages=false;coroutine.yield(false)end end;function ReadComicsOnline:getLatestManga(m,h)self:getManga(self.Link.."/filterList?sortBy=last_release&asc=false&page="..m,h)end;function ReadComicsOnline:getPopularManga(m,h)self:getManga(self.Link.."/filterList?sortBy=views&asc=false&page="..m,h)end;function ReadComicsOnline:searchManga(n,m,h)self:getManga(self.Link.."/filterList?alpha="..n.."&sortBy=views&asc=false&page="..m,h)end;function ReadComicsOnline:getChapters(o,h)local i=e(o.Link)local p={}for j,l in i:gmatch('chapter%-title%-rtl">[^<]-<a href="([^"]-)">([^<]-)</a>')do p[#p+1]={Name=a(l),Link=j,Pages={},Manga=o}end;for q=#p,1,-1 do h[#h+1]=p[q]end end;function ReadComicsOnline:prepareChapter(r,h)local i=e(r.Link)for j in i:gmatch('img%-responsive"[^>]-data%-src=\' ([^\']-) \'')do h[#h+1]=j end end;function ReadComicsOnline:loadChapterPage(f,h)h.Link=f end