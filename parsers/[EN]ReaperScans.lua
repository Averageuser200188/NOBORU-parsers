ReaperScans=Parser:new("Reaper Scans","https://reaperscans.com","ENG","REAPERSCANSEN",1)REAPERSCANS_GET_TRENDING="/page/%s/?s&post_type=wp-manga&op&author&artist&release&adult&m_orderby=trending"REAPERSCANS_GET_LATEST="/page/%s/?s&post_type=wp-manga&op&author&artist&release&adult&m_orderby=latest"REAPERSCANS_GET_SEARCH="/page/%s/?s=%s&post_type=wp-manga"local function a(b)if u8c then return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&([^;]-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)else return b end end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="string"})while Threads.check(g)do coroutine.yield(false)end;return g.string or""end;function ReaperScans:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l,m in i:gmatch('class="row.-<a href="[^"]-/series/([^"]-)/" title="([^"]-)">.-src="([^"]-)".-Genres%s*</h5>%s*</div>(.-)</div>')do if m:find("Novel")==nil then h[#h+1]=CreateManga(a(k),j,l:gsub("%%","%%%%"),self.ID,self.Link.."/series/"..j.."/")end;h.NoPages=false;coroutine.yield(false)end end;function ReaperScans:getPopularManga(n,h)self:getManga(self.Link..REAPERSCANS_GET_TRENDING:format(n),h)end;function ReaperScans:getLatestManga(n,h)self:getManga(self.Link..REAPERSCANS_GET_LATEST:format(n),h)end;function ReaperScans:searchManga(o,n,h)self:getManga(self.Link..REAPERSCANS_GET_SEARCH:format(n,o),h)end;function ReaperScans:getChapters(p,h)local i=e(self.Link.."/series/"..p.Link.."/")local q=i:match('Type%s*</h5>%s*</div>(.-)</div>')or""if q:find("Novel")~=nil then Notifications.pushUnique("Novels not supported! Sorry :(",800)return end;local r={}for j,k in i:gmatch('chapter%-link">%s*<a href=".-/([^/]-)/"[^>]->%s*<[^>]->([^<]-)</p>')do if j then r[#r+1]={Name=k,Link=j,Pages={},Manga=p}end end;for s=#r,1,-1 do h[#h+1]=r[s]end end;function ReaperScans:prepareChapter(t,h)local i=e(self.Link.."/series/"..t.Manga.Link.."/"..t.Link.."/")for j in i:gmatch('id="image%-[0-9]*" data%-src="%s*([^"]-)%s*"')do h[#h+1]=j:gsub("\\/","/"):gsub("%%","%%%%")end end;function ReaperScans:loadChapterPage(f,h)h.Link=f end