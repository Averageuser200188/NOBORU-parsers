VLComic=Parser:new("VLComic","http://vlcomic.com","ENG","VLCOMIC",1)VLComic.Disabled=true;local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="text"})while Threads.check(g)do coroutine.yield(false)end;return g.text or""end;function VLComic:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l in i:gmatch('class="ig%-grid">.-href="(%S-)".-src="(%S-)".-title="[^"]-">(.-)</a>')do h[#h+1]=CreateManga(a(l),j,self.Link..k:gsub("%%","%%%%"),self.ID,self.Link..j)h.NoPages=false;coroutine.yield(false)end end;function VLComic:getPopularManga(m,h)self:getManga(self.Link.."/popular-comics/"..m,h)end;function VLComic:getLatestManga(m,h)self:getManga(self.Link.."/new-comics/"..m,h)end;function VLComic:searchManga(n,o,h)self:getManga(self.Link.."/comic-collection/"..n,h)h.NoPages=true end;function VLComic:getChapters(p,h)local i=e(self.Link..p.Link)local q={}for j,l in i:gmatch('class="ch%-name" href="(%S-)">(.-)</a>')do q[#q+1]={Name=a(l),Link=j,Pages={},Manga=p}end;for r=#q,1,-1 do h[#h+1]=q[r]end end;function VLComic:prepareChapter(s,h)local i=e(self.Link..s.Link)for f in i:gmatch('<img src="(%S-)" title')do h[#h+1]=f:gsub("%%","%%%%")end end;function VLComic:loadChapterPage(f,h)h.Link=f end