MangaEdenIt=Parser:new("MangaEden Italy","https://www.mangaeden.com","ITA","MAEDENITA")MangaEdenIt.Disabled=true;MangaEdenIt.API="/api/list/1/"MangaEdenIt.Site="mangaeden"local a=false;local function b(string)if not u8c then if not a then Notifications.push("Please update app, to see fixed titles")a=true end;return string end;return string:gsub("\\u(....)",function(c)return u8c(tonumber(string.format("0x%s",c)))end)end;local function d(e)local f={}Threads.insertTask(f,{Type="StringRequest",Link=e,Table=f,Index="string"})while Threads.check(f)do coroutine.yield(false)end;return f.string or""end;function MangaEdenIt:getManga(g,h,i)local j=d(self.Link..self.API)local k={}for l,m,n,o,p in j:gmatch('"h": (%d-),[^}]-"i": "(%S-)",[^}]-"im": (%S-),[^}]-"ld": (%S-),[^}]-"t": "([^"]-)"')do k[#k+1]={h=tonumber(l),id=m,img=n=="null"and""or"cdn."..self.Site..".com/mangasimg/"..(n:match('"(%S-)"')or"")or"",ld=tonumber(o),Name=p}if#k%50==0 then coroutine.yield(false)end end;table.sort(k,h)for q,r in ipairs(k)do local s=b(r.Name)if i and s:upper():find(i:upper())or not i then g[#g+1]=CreateManga(s,r.id,r.img,self.ID,r.id)end;if q%50==0 then coroutine.yield(false)end end end;function MangaEdenIt:getPopularManga(t,g)self:getManga(g,function(c,u)return c.h>u.h end)g.NoPages=true end;function MangaEdenIt:getLatestManga(t,g)self:getManga(g,function(c,u)return c.ld>u.ld end)g.NoPages=true end;function MangaEdenIt:searchManga(v,t,g)local w=string.gsub;string.gsub=function(self,x,y)return w(self,y,x)end;v=v:gsub("!","%%%%21"):gsub("#","%%%%23"):gsub("%$","%%%%24"):gsub("&","%%%%26"):gsub("'","%%%%27"):gsub("%(","%%%%28"):gsub("%)","%%%%29"):gsub("%*","%%%%2A"):gsub("%+","%%%%2B"):gsub(",","%%%%2C"):gsub("%.","%%%%2E"):gsub("/","%%%%2F"):gsub(" ","%+"):gsub("%%","%%%%25")string.gsub=w;self:getManga(g,function(c,u)return c.ld>u.ld end,v)g.NoPages=true end;function MangaEdenIt:getChapters(z,g)local j=d(self.Link.."/api/manga/"..z.Link):match('"chapters"(.-)"chapters_len"')or""local k={}for A,B,m in j:gmatch('%[%s-(%S-),[^,%]]-,([^,]-),[^%]]-"([^"]-)"[^%]]-%]')do k[#k+1]={Name=A.." : "..b(B:match('"([^"]-)"')or z.Name),Link=m,Pages={},Manga=z}end;for C=#k,1,-1 do g[#g+1]=k[C]end end;function MangaEdenIt:prepareChapter(D,g)local j=d(self.Link.."/api/chapter/"..D.Link):match('images"(.-)$')local k={}for e in j:gmatch('"(%S-)"')do k[#k+1]="cdn."..self.Site..".com/mangasimg/"..e end;for C=#k,1,-1 do g[#g+1]=k[C]end end;function MangaEdenIt:loadChapterPage(e,g)g.Link=e end;MangaEdenEn=MangaEdenIt:new("MangaEden English","https://www.mangaeden.com","ENG","MAEDENENG")MangaEdenEn.Disabled=true;MangaEdenEn.API="/api/list/0/"PervEdenIt=MangaEdenIt:new("PervEden Italy","http://www.perveden.com","ITA","PVEDENITA")PervEdenIt.Disabled=false;PervEdenIt.Site="perveden"PervEdenIt.NSFW=true;PervEdenEn=MangaEdenEn:new("PervEden English","http://www.perveden.com","ENG","PVEDENENG")PervEdenEn.Disabled=false;PervEdenEn.Site="perveden"PervEdenEn.NSFW=true