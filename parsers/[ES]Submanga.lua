Submanga=Parser:new("Submanga","https://submangas.net","ESP","SUBMANGASPA",2)Submanga.Disabled=true;local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="string"})while Threads.check(g)do coroutine.yield(false)end;return g.string or""end;function Submanga:getManga(f,h)local i=e(f)local j=h;local k=true;for l,m,n in i:gmatch('<a href="([^"]-)"[^>]->[^>]-src=\'([^\']-)\' alt=\'([^\']-)\'>[^<]-</a>')do local o=CreateManga(a(n),l,m,self.ID,l)if o then j[#j+1]=o;k=false end;coroutine.yield(false)end;if k then j.NoPages=true end end;function Submanga:getPopularManga(p,h)self:getManga(self.Link.."/filterList?sortBy=views&asc=false&page="..p,h)end;function Submanga:searchManga(q,p,h)self:getManga(self.Link.."/filterList?alpha="..q.."&sortBy=views&asc=false&page="..p,h)end;function Submanga:getChapters(o,h)local i=e(o.Link)local r=(i:match('span class="list%-group%-item">.-<br>(.-)</span>')or""):gsub("^%s+",""):gsub("%s+$","")h.Description=a(r)local j={}for l,n in i:gmatch('fa fa%-eye"></i>[^<]-<a href="([^"]-)">([^<]-)</a>')do j[#j+1]={Name=a(n),Link=l,Pages={},Manga=o}end;for s=#j,1,-1 do h[#h+1]=j[s]end end;function Submanga:prepareChapter(t,h)local i=e(t.Link)local j=h;for l in i:gmatch('img%-responsive"[^>]-data%-src=\' ([^\']-) \'')do j[#j+1]=l end end;function Submanga:loadChapterPage(f,h)h.Link=f end