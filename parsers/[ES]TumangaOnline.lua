TumangaOnline=Parser:new("TumangaOnline","http://tumangaonline.uno","ESP","TMANGAONLESP",3)TumangaOnline.Letters={"#","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"}TumangaOnline.Tags={"Acción","Aventura","Comedia","Drama","Ecchi","Fantasía","Gender Bender","Harem","Histórico","Horror","Josei","Artes Marciales","Maduro","Mecha","Misterio","One Shot","Psicológico","Romance","Escolar","Ciencia Ficción","Seinen","Shoujo","Shoujo Ai","Shounen","Shounen Ai","Recuentos de la vida","Deportes","Supernatural","Tragedia","Yaoi","Yuri","Demonios","Juegos","Policial","Militar","Thriller","Autos","Música","Vampiros","Magia","Samurai","Boys love"}TumangaOnline.TagValues={["Acción"]="1",["Aventura"]="2",["Comedia"]="3",["Drama"]="5",["Ecchi"]="6",["Fantasía"]="7",["Gender Bender"]="8",["Harem"]="9",["Histórico"]="10",["Horror"]="11",["Josei"]="12",["Artes Marciales"]="13",["Maduro"]="14",["Mecha"]="15",["Misterio"]="16",["One Shot"]="17",["Psicológico"]="18",["Romance"]="19",["Escolar"]="20",["Ciencia Ficción"]="21",["Seinen"]="22",["Shoujo"]="23",["Shoujo Ai"]="24",["Shounen"]="25",["Shounen Ai"]="26",["Recuentos de la vida"]="27",["Deportes"]="28",["Supernatural"]="29",["Tragedia"]="30",["Yaoi"]="31",["Yuri"]="32",["Demonios"]="33",["Juegos"]="34",["Policial"]="35",["Militar"]="36",["Thriller"]="37",["Autos"]="38",["Música"]="39",["Vampiros"]="40",["Magia"]="41",["Samurai"]="42",["Boys love"]="43"}local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="text"})while Threads.check(g)do coroutine.yield(false)end;return g.text or""end;function TumangaOnline:getManga(f,h)local i=e(f)h.NoPages=true;for j,k,l in i:gmatch('<a href="([^"]-)" class="thumbnail">[^>]-src=\'([^\']-)\' alt=\'([^\']-)\'>[^<]-</a>')do h[#h+1]=CreateManga(a(l),j,k,self.ID,j)h.NoPages=false;coroutine.yield(false)end end;function TumangaOnline:getPopularManga(m,h)self:getManga(self.Link.."/filterList?sortBy=views&asc=false&page="..m,h)end;function TumangaOnline:getLetterManga(m,h,n)self:getManga(self.Link.."/filterList?alpha="..n:gsub("#","Other").."&sortBy=name&asc=true&page="..m,h)end;function TumangaOnline:getTagManga(m,h,o)self:getManga(self.Link.."/filterList?alpha=&cat="..(self.TagValues[o]or"0").."&sortBy=name&asc=true&page="..m,h)end;function TumangaOnline:getLatestManga(m,h)local i=e(self.Link.."/latest-release?page="..m)h.NoPages=true;for j,l in i:gmatch('manga%-item.-href="([^"]-)">(.-)</a>')do local p=j:match("manga/(.*)/?")or""h[#h+1]=CreateManga(a(l),j,self.Link.."/uploads/manga/"..p.."/cover/cover_250x350.jpg",self.ID,j)h.NoPages=false;coroutine.yield(false)end end;function TumangaOnline:searchManga(q,m,h)self:getManga(self.Link.."/filterList?alpha="..q.."&sortBy=views&asc=false&page="..m,h)end;function TumangaOnline:getChapters(r,h)local i=e(r.Link)local s=i:match('class="well">.-<p[^>]->(.-)</div>')or""h.Description=a(s:gsub("<.->",""):gsub("^%s+",""):gsub("%s+$",""))local t={}for j,l in i:gmatch('chapter%-title%-rtl">[^<]-<a href="([^"]-)">([^<]-)</a>')do t[#t+1]={Name=a(l),Link=j,Pages={},Manga=r}end;for u=#t,1,-1 do h[#h+1]=t[u]end end;function TumangaOnline:prepareChapter(v,h)local i=e(v.Link)for j in i:gmatch('img%-responsive"[^>]-data%-src=\'[/]*([^\']-)\'')do h[#h+1]=j end end;function TumangaOnline:loadChapterPage(f,h)h.Link=f end