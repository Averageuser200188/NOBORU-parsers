PhoenixScansPoland=Parser:new("Phoenix Scans","https://phoenix-scans.pl","POL","PHNXSCNSPOL",1)local function a(b)local c={}Threads.insertTask(c,{Type="StringRequest",Link=b,Table=c,Index="text"})while Threads.check(c)do coroutine.yield(false)end;return c.text or""end;local function d(string)return string:gsub("&#([^;]-);",function(e)local f=tonumber("0"..e)or tonumber(e)return f and u8c(f)or"&#"..e..";"end):gsub("&(.-);",function(e)return HTML_entities and HTML_entities[e]and u8c(HTML_entities[e])or"&"..e..";"end)end;local function g(string)return string:gsub("\\u(....)",function(e)return u8c(tonumber("0x"..e))end)end;function PhoenixScansPoland:getManga(b,h)local i=a(b)h.NoPages=true;for j,k,l in i:gmatch("<a href=\"([^\"]-)\" class=\"thumbnail\">[^>]-src='([^']-)' alt='([^']-)'>[^<]-</a>")do h[#h+1]=CreateManga(d(l),j:gsub("%%","%%%%"),k:gsub(" ","%%20"):gsub("%%","%%%%"),self.ID,j)h.NoPages=false;coroutine.yield(false)end end;function PhoenixScansPoland:getPopularManga(m,h)self:getManga(self.Link.."/filterList?sortBy=views&asc=false&page="..m,h)end;function PhoenixScansPoland:getLatestManga(m,h)local i=a(self.Link.."/latest-release?page="..m)h.NoPages=true;for j,l in i:gmatch('"manga%-item">.-href="(%S-)">([^<]-)</a>')do local n=j:match("/([^/]-)$")or""h[#h+1]=CreateManga(d(l),self.Link.."/manga/"..n:gsub(" ","%%20"):gsub("%%","%%%%"),self.Link.."//uploads/manga/"..n:gsub("%%","%%%%").."/cover/cover_250x350.jpg",self.ID,j)h.NoPages=false;coroutine.yield(false)end end;function PhoenixScansPoland:searchManga(o,p,h)local q=string.gsub;string.gsub=function(self,r,s)return q(self,s,r)end;o=o:gsub("!","%%%%21"):gsub("#","%%%%23"):gsub("%$","%%%%24"):gsub("&","%%%%26"):gsub("'","%%%%27"):gsub("%(","%%%%28"):gsub("%)","%%%%29"):gsub("%*","%%%%2A"):gsub("%+","%%%%2B"):gsub(",","%%%%2C"):gsub("%.","%%%%2E"):gsub("/","%%%%2F"):gsub(" ","%+"):gsub("%%","%%%%25")string.gsub=q;local t=self.Link.."/search?query="..o;local i=a(t)for l,j in i:gmatch('"value":"([^"]-)","data":"([^"]-)"')do local u=CreateManga(g(l),self.Link.."/manga/"..g(j):gsub(" ","%%20"):gsub("%%","%%%%"),self.Link.."//uploads/manga/"..g(j):gsub(" ","%%20"):gsub("%%","%%%%").."/cover/cover_250x350.jpg",self.ID,self.Link.."/manga/"..g(j))h[#h+1]=u;coroutine.yield(false)end;h.NoPages=true end;function PhoenixScansPoland:getChapters(u,h)local i=a(u.Link)local v={}for j,l in i:gmatch("chapter%-title%-rtl\">[^<]-<a href=\"([^\"]-)\">([^<]-)</a>")do v[#v+1]={Name=d(l),Link=j:gsub(" ","%%20"):gsub("%%","%%%%"),Pages={},Manga=u}end;for w=#v,1,-1 do h[#h+1]=v[w]end end;function PhoenixScansPoland:prepareChapter(x,h)local i=a(x.Link)for j in i:gmatch("img%-responsive\"[^>]-data%-src=' ([^']-) '")do h[#h+1]=j:gsub(" ","%%20"):gsub("%%","%%%%")end end;function PhoenixScansPoland:loadChapterPage(b,h)h.Link=b end