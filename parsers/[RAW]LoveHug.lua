LoveHug=Parser:new("LoveHug","https://lovehug.net","RAW","LOVEHUGRAW",4)LoveHug.Disabled=true;local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local e="https://lovehug.net/manga-list.html?listType=pagination&page=%s&artist=&author=&group=&m_status=&name=&genre=&ungenre=&magazine=&sort=%s&sort_type=%s"local f="https://lovehug.net/manga-list.html?listType=pagination&page=%s&artist=&author=&group=&m_status=&name=%s&genre=&ungenre=&magazine=&sort=views&sort_type=DESC"local function g(h,i,j)return e:format(h,i,j)end;local function k(h,l)return f:format(h,l)end;local function m(n)local o={}Threads.insertTask(o,{Type="StringRequest",Link=n,Table=o,Index="text"})while Threads.check(o)do coroutine.yield(false)end;return o.text or""end;function LoveHug:getManga(n,p)local q=m(n)p.NoPages=true;local r,s=q:match("Page (%d+) of (%d+)")for t,u,v in q:gmatch('<div class="thumb%-item%-flow.-data%-bg="([^"]-)".-class="thumb_attr series%-title">.-href="/(.-)"[^>]->([^<]-)<')do p[#p+1]=CreateManga(a(v),u,{Link=t,Header1="Referer: https://lovehug.net/manga-list.html"},self.ID,self.Link.."/"..u)if tonumber(r)<tonumber(s)then p.NoPages=false end;coroutine.yield(false)end end;function LoveHug:getPopularManga(h,p)self:getManga(g(h,"views","DESC"),p)end;function LoveHug:getLatestManga(h,p)self:getManga(g(h,"last_update","DESC"),p)end;function LoveHug:getAZManga(h,p)self:getManga(g(h,"name","DESC"),p)end;function LoveHug:searchManga(w,h,p)self:getManga(k(h,w),p)end;function LoveHug:getChapters(x,p)local q=m(self.Link.."/"..x.Link)local y={}for u,v in q:gmatch('<a href="/[^/>]-/([^/>]-/)" target="_blank" title=[^>]->[^<]-<li>[^<]-<div class="chapter%-name text%-truncate">([^<]-)</div>')do y[#y+1]={Name=a(v),Link=u,Pages={},Manga=x}end;for z=#y,1,-1 do p[#p+1]=y[z]end end;function LoveHug:prepareChapter(A,p)local q=m(self.Link.."/"..A.Manga.Link..A.Link)for u in q:gmatch("<img class='[^']-chapter%-img' [^>]+src[^>]-='%s*([^']-)%s*'")do p[#p+1]={Link=u:gsub("[\r\n]",""),Header1="Referer: https://lovehug.net/manga-list.html"}end end;function LoveHug:loadChapterPage(n,p)p.Link=n end