MangaOneLove=Parser:new("MangaOneLove","https://mangaonelove.ru","RUS","MANGAONELOVERU",1)local function a(b)local c={}Threads.insertTask(c,{Type="StringRequest",Link=b,Table=c,Index="text"})while Threads.check(c)do coroutine.yield(false)end;return c.text or""end;local function d(e)return e:gsub("&#([^;]-);",function(f)local g=tonumber("0"..f)or tonumber(f)return g and u8c(g)or"&#"..f..";"end):gsub("&(.-);",function(f)return HTML_entities and HTML_entities[f]and u8c(HTML_entities[f])or"&"..f..";"end)end;local function h(e)return e:gsub("\\u(....)",function(f)return u8c(tonumber("0x"..f))end)end;function MangaOneLove:getManga(b,i)local j=a(b)i.NoPages=true;for k,l,m in j:gmatch('manga%-item%-.-href="[^"]-/manga/(.-)/" title="(.-)".-data%-src="(.-)"')do i[#i+1]=CreateManga(d(l),k,m,self.ID,self.Link.."/manga/"..k)i.NoPages=false;coroutine.yield(false)end end;function MangaOneLove:getPopularManga(n,i)self:getManga(self.Link.."/manga/page/"..n.."/?m_orderby=rating",i)end;function MangaOneLove:getAZManga(n,i)self:getManga(self.Link.."/manga/page/"..n.."/?m_orderby=alphabet",i)end;function MangaOneLove:getLatestManga(n,i)self:getManga(self.Link.."/manga/page/"..n.."/?m_orderby=latest",i)end;function MangaOneLove:searchManga(o,n,i)local j=a(self.Link.."/page/"..n.."/?s="..o.."&post_type=wp-manga")i.NoPages=true;for k,l,m in j:gmatch('item__content".-href="[^"]-/manga/(.-)/" title="(.-)".-data%-src="(.-)"')do i[#i+1]=CreateManga(d(l),k,m,self.ID,self.Link.."/manga/"..k)i.NoPages=false;coroutine.yield(false)end end;function MangaOneLove:getChapters(p,i)local j=a(self.Link.."/manga/"..p.Link)local q={}for k,l in j:gmatch('wp%-manga%-chapter%s*"> <a href="[^"]+/([^"]-)/">(.-)</a>')do q[#q+1]={Name=d(l),Link=k,Pages={},Manga=p}end;for r=1,#q do i[#i+1]=q[r]end end;function MangaOneLove:prepareChapter(s,i)local j=a(self.Link.."/manga/"..s.Manga.Link.."/"..s.Link)j=j:match("chapter_preloaded_images = %[(.-)%]")for k in j:gmatch('"(.-)"')do i[#i+1]=k:gsub("\\/","/")end end;function MangaOneLove:loadChapterPage(b,i)i.Link=b end