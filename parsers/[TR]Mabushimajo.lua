Mabushimajo=Parser:new("Mabushimajo","http://mabushimajo.com","TUR","MABUSHTR",1)Mabushimajo.Disabled=true;local function a(b)return b:gsub("&#([^;]-);",function(c)local d=tonumber("0"..c)or tonumber(c)return d and u8c(d)or"&#"..c..";"end):gsub("&(.-);",function(c)return HTML_entities and HTML_entities[c]and u8c(HTML_entities[c])or"&"..c..";"end)end;local function e(f)local g={}Threads.insertTask(g,{Type="StringRequest",Link=f,Table=g,Index="text"})while Threads.check(g)do coroutine.yield(false)end;return g.text or""end;function Mabushimajo:getManga(f,h)local i=e(f)for j,k,l in i:gmatch('class="group"><a href="(%S-)">.-src="(%S-)".-title=.->([^<]-)<')do h[#h+1]=CreateManga(a(l),j:match("^.+/(.-)/$"),k,self.ID,j)coroutine.yield(false)end;h.NoPages=not i:find("Last")end;function Mabushimajo:getPopularManga(m,h)self:getManga(self.Link.."/onlineokuma/directory/"..m,h)end;function Mabushimajo:getChapters(n,h)local i=e(n.RawLink)local o={}for j,l in i:gmatch('class="element">.-<a href="(%S-)" title=[^>]->([^<]-)<')do o[#o+1]={Name=a(l),Link=j:match("read/(.+)"),Pages={},Manga=n}end;for p=#o,1,-1 do h[#h+1]=o[p]end end;function Mabushimajo:prepareChapter(q,h)local i=e(self.Link.."/onlineokuma/read/"..q.Link.."/page/1")for j in i:gmatch('"url" ?: ?"(%S-)"')do h[#h+1]=j:gsub("\\/","/")end end;function Mabushimajo:loadChapterPage(f,h)h.Link=f end