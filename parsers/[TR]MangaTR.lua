if Settings.Version>0.32 then MangaTR=Parser:new("MangaTR","https://manga-tr.com","TUR","MANGATRTR")MangaTR.Disabled=true;local a=false;local function b(c)if not u8c then if not a then Notifications.push("Please update app, to see fixed titles")a=true end;return c end;return c:gsub("&#([^;]-);",function(d)local e=tonumber("0"..d)or tonumber(d)return e and u8c(e)or"&#"..d..";"end)end;local function f(g)local h={}Threads.insertTask(h,{Type="StringRequest",Link=g,Table=h,Index="string"})while Threads.check(h)do coroutine.yield(false)end;return h.string or""end;function MangaTR:getManga(g,i)local j=f(g)local k=i;local l=true;for m,n,o in j:gmatch('media%-object img.-src="(%S-)".-href="(%S-)">([^<]-)<')do local p=CreateManga(b(o),n,m:find("^http")and m or self.Link.."/"..m,self.ID,self.Link.."/"..n)if p then k[#k+1]=p;l=false end;coroutine.yield(false)end;if l then k.NoPages=true end end;function MangaTR:getPopularManga(q,i)self:getManga(self.Link.."/manga-list.html?listType=pagination&page="..q.."&durum=&ceviri=&yas=&icerik=&artist=&author=&name=&tur=&sort=views&sort_type=DESC",i)end;function MangaTR:getLatestManga(q,i)self:getManga(self.Link.."/manga-list.html?listType=pagination&page="..q.."&durum=&ceviri=&yas=&icerik=&artist=&author=&name=&tur=&sort=last_update&sort_type=DESC",i)end;if not u8c then function MangaTR:searchManga(r,q,i)Notifications.push("Parser don't support search feature")Notifications.push("Please update App")end end;function MangaTR:getChapters(p,i)local j=f(self.Link.."/"..p.Link)local s=j:match('(/cek/fetch_pages_manga%.php%?manga_cek=.-)"')local k={}local q=1;while true do local h={}Threads.insertTask(h,{Type="StringRequest",Link=self.Link..s,Table=h,Index="string",PostData="page="..q,HttpMethod=POST_METHOD,Header1="X-Requested-With:XMLHttpRequest"})while Threads.check(h)do coroutine.yield(false)end;q=q+1;j=h.string or""local t=true;for n,o in j:gmatch('class="table%-bordered">.-href=\'(%S-)\'><b>(.-)<')do k[#k+1]={Name=b(o),Link=n,Pages={},Manga=p}t=false end;if t then break end end;for u=#k,1,-1 do i[#i+1]=k[u]end end;function MangaTR:prepareChapter(v,i)local j=f(self.Link.."/"..v.Link)j=j:match('class="label.-</select')if j then local k=i;for g in j:gmatch('value="(%S-)"[^>]->%d')do k[#k+1]=g end end end;function MangaTR:loadChapterPage(g,i)local j=f(self.Link.."/"..g)local w=j:match("<img src='([^']-)' class='chapter%-img'>"):match("%S+")or""if w:match("^http")then i.Link=w else i.Link=self.Link.."/"..w end end end