Puzzmos=Parser:new("Puzzmos","https://www.puzzmos.com","TUR","PUZZMOSTUR",2)local function a(b)local c={}Threads.insertTask(c,{Type="StringRequest",Link=b,Table=c,Index="text"})while Threads.check(c)do coroutine.yield(false)end;return c.text or""end;local function d(string)return string:gsub("&#([^;]-);",function(e)local f=tonumber("0"..e)or tonumber(e)return f and u8c(f)or"&#"..e..";"end):gsub("&(.-);",function(e)return HTML_entities and HTML_entities[e]and u8c(HTML_entities[e])or"&"..e..";"end)end;local function g(string)return string:gsub("\\u(....)",function(e)return u8c(tonumber("0x"..e))end)end;function Puzzmos:getPopularManga(h,i)local j=a(self.Link.."/filterList?sortBy=views&asc=false&page="..h)i.NoPages=true;for k,l,m in j:gmatch('<a href="([^"]-)" class="thumbnail">[^>]-src=\'([^\']-)\' alt=\'([^\']-)\'>[^<]-</a>')do i[#i+1]=CreateManga(d(m),k:gsub("%%","%%%%"),l:gsub(" ","%%20"):gsub("%%","%%%%"),self.ID,k)i.NoPages=false;coroutine.yield(false)end end;local n={}function Puzzmos:getLatestManga(h,i)local j=a(self.Link.."/latest-release?page="..h,i)i.NoPages=true;if h==1 then n={}end;for k,m in j:gmatch('"manga%-item">.-href="(%S-)">([^<]-)</a>')do i.NoPages=false;local o=k:match("/([^/]-)$")or""if not n[k]then local p=CreateManga(d(m),self.Link.."/manga/"..o:gsub(" ","%%20"):gsub("%%","%%%%"),self.Link.."//uploads/manga/"..o:gsub("%%","%%%%").."/cover/cover_250x350.jpg",self.ID,k)i[#i+1]=p;if p then n[k]=true end;coroutine.yield(false)end end end;function Puzzmos:searchManga(q,h,i)local r=string.gsub;string.gsub=function(self,s,t)return r(self,t,s)end;q=q:gsub("!","%%%%21"):gsub("#","%%%%23"):gsub("%$","%%%%24"):gsub("&","%%%%26"):gsub("'","%%%%27"):gsub("%(","%%%%28"):gsub("%)","%%%%29"):gsub("%*","%%%%2A"):gsub("%+","%%%%2B"):gsub(",","%%%%2C"):gsub("%.","%%%%2E"):gsub("/","%%%%2F"):gsub(" ","%+"):gsub("%%","%%%%25")string.gsub=r;local u=self.Link.."/search?query="..q;local j=a(u)for m,k in j:gmatch('"value":"([^"]-)","data":"([^"]-)"')do local p=CreateManga(g(m),self.Link.."/manga/"..g(k):gsub(" ","%%20"):gsub("%%","%%%%"),self.Link.."//uploads/manga/"..g(k):gsub(" ","%%20"):gsub("%%","%%%%").."/cover/cover_250x350.jpg",self.ID,self.Link.."/manga/"..g(k))i[#i+1]=p;coroutine.yield(false)end;i.NoPages=true end;function Puzzmos:getChapters(p,i)local j=a(p.Link)local v={}for k,m in j:gmatch('chapter%-title%-rtl">[^<]-<a href="([^"]-)">([^<]-)</a>')do v[#v+1]={Name=d(m),Link=k:gsub(" ","%%20"):gsub("%%","%%%%"),Pages={},Manga=p}end;for w=#v,1,-1 do i[#i+1]=v[w]end end;function Puzzmos:prepareChapter(x,i)local j=a(x.Link)for k in j:gmatch('img%-responsive"[^>]-data%-src=\' ([^\']-) \'')do i[#i+1]=k:gsub(" ","%%20"):gsub("%%","%%%%")end end;function Puzzmos:loadChapterPage(b,i)i.Link=b end