if Settings.Version>0.35 then TruyenQQ=Parser:new("TruyenQQ","http://truyenqq.com","VIE","TRUYENQQVIE",2)local a;local function b(c)local d={}Threads.insertTask(d,{Type="StringRequest",Link=c,Table=d,Index="string",Cookie=a and a.."; path=/"or""})while Threads.check(d)do coroutine.yield(false)end;return d.string or""end;function TruyenQQ:getManga(c,e)local f=b(c)local g=e;local h=true;for i,j,k in f:gmatch('item">[^<]-<a.-href="([^"]-)".->.-<img[^>]-src="([^"]-)".-alt="([^"]-)"')do local l=CreateManga(k,i,{Link=j,Header1="Referer: "..c},self.ID,i)if l then g[#g+1]=l;h=false end;coroutine.yield(false)end;if h then g.NoPages=true end end;function TruyenQQ:getPopularManga(m,e)self:getManga(self.Link.."/truyen-yeu-thich/trang-"..m..".html",e)end;function TruyenQQ:getLatestManga(m,e)self:getManga(self.Link.."/truyen-moi-cap-nhat/trang-"..m..".html",e)end;function TruyenQQ:searchManga(n,m,e)self:getManga(self.Link.."/tim-kiem/trang-"..m..".html?q="..n,e)end;function TruyenQQ:getChapters(l,e)local f=b(l.Link)local g={}for i,k in f:gmatch('item row">.-<a.-href="([^"]-)">([^>]-)</a>')do g[#g+1]={Name=k:gsub("%s+",""),Link=i,Pages={},Manga=l}end;for o=#g,1,-1 do e[#e+1]=g[o]end end;function TruyenQQ:prepareChapter(p,e)local f=b(p.Link)local g=e;for i in f:gmatch('<img class="lazy".-src="([^"]-)"')do g[#g+1]=i.."\n"..p.Link end end;function TruyenQQ:loadChapterPage(c,e)e.Link={Link=c:match("^(.-)\n")or"",Header1="Referer: "..(c:match("\n(.-)$")or"")}end end